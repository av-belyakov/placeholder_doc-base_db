# Readme

Сервис 'placeholder_doc_base_db' принимает любые, структурированные в формате JSON, данные, разбирает их и укладывает в документо-ориентированную базу данных.

## Конфигурационные настройки

Конфигурационные параметры для сервиса, могут быть заданы как через конфигурационный файл, так и методом установки переменных окружения. Однако, все пароли и ключевые токены, используемые для авторизации, задаются ТОЛЬКО через переменные окружения.

#### Типы конфигурационных файлов:

- config.yml общий конфигурационный файл, здесь хранятся настройки логирования и параметры доступа к Zabbix;
- config_test.yml конфигурационный файл используемый для тестов при разработке;
- config_dev.yml конфигурационный файл используемый при развертывании тестовой инфраструктуры максимально приближенной к продуктовой;
- config_prod.yml конфигурационный файл применяемый в продуктовом режиме.

Основная переменная окружения для данного приложения - GO_PHDOC-BASEDB_MAIN. На основании значения этой переменной принимается решение какой из конфигурационных файлов config_test.yml, config_dev.yml или config_prod.yml использовать. При GO_PHDOC-BASEDB_MAIN=development будет использоваться config_dev.yml, при GO_PHDOC-BASEDB_MAIN=test будет использоваться config_test.yml, во всех остальных случаях, в том числе и при отсутствии переменной окружения GO_PHDOC-BASEDB_MAIN будет использоваться конфигурационный файл config_prod.yml. Перечень переменных окружения которые можно использовать для настройки приложения:

#### Переменная окружения отвечающая за тип запуска приложения "test", "development" или "production"

- GO_PHDOC-BASEDB_MAIN

#### Переменные окружения отвечающие за подключение к NATS

- GO_PHDOC-BASEDB_NHOST - ip или доменное имя
- GO_PHDOC-BASEDB_NPORT - сетевой порт
- GO_PHDOC-BASEDB_NCACHETTL - данный параметр должен содержать время жизни записи
  кэша, по истечение которого запись автоматически удаляется, значение задается
  в секундах в диапазоне от 10 до 86400 секунд
- GO_PHDOC-BASEDB_NSUBSENDERCASE - канал для отправки в него информации по case
- GO_PHDOC-BASEDB_NSUBSENDERALERT - канал для отправки в него информации по alert
- GO_PHDOC-BASEDB_NSUBLISTENERCOMMAND - канал для приема команд которые нужно выполнить в TheHive
